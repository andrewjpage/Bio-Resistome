#!/usr/bin/env perl

package Bio::Resistome::Bin::LookupAccessionMetadata;
# ABSTRACT: Take in a list of accession numbers and lookup the metadata in EMBL
# PODNAME: lookup_accession_metadata
=head1 SYNOPSIS

Take in a list of accession numbers and lookup the metadata in EMBL

=cut

BEGIN { unshift( @INC, '../lib' ) }
use Moose;
use Getopt::Long;
use Bio::Resistome::Accessions;


my ($input_file, $help );

GetOptions(
    'i|input_file=s'    => \$input_file,
    'h|help'            => \$help,
);

( defined($input_file) && ( -e $input_file ) && !$help ) or die <<USAGE;
Usage: lookup_accession_metadata [options]
Take in a list of accession numbers and lookup the metadata in EMBL

# Create 1 evolved genome
lookup_accession_metadata -i list_of_accession_numbers

# This help message
lookup_accession_metadata -h

USAGE


open(my $fh, $input_file) or die 'Couldnt open input file';
my @accession_numbers;
while(<$fh>)
{
  chomp;
  push(@accession_numbers, $_);
}

my $obj = Bio::Resistome::Accessions->new(
  accession_numbers => \@accession_numbers
);
for my $accession_metadata (@{$obj->accessions_metadata})
{
  print $obj->accessions_metadata->accession_number. "\t".
        $obj->accessions_metadata->species. "\t".
        $obj->accessions_metadata->taxon_id. "\t".
        $obj->accessions_metadata->description."\n";
}

